<!DOCTYPE html>
<html>
<head>
<title>D3GL Muse Tour</title>
<style type="text/css">
    body {
        background: url('../img/darkcreampaper.png');
        font: 20pt "Trebuchet MS","Helvetica Neue",sans-serif;
        color: #fff;
    }
</style>
</head>
<body>

<script type="text/javascript" src="../js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="../js/jquery.mousewheel.js"></script>
<script type="text/javascript" src="../js/d3.v2.js"></script>
<script type="text/javascript" src="../js/RequestAnimationFrame.js"></script>
<script type="text/javascript" src="../js/three.js"></script>
<script type="text/javascript" src="../js/d3gl.js"></script>
<!-- All scripts above are included here:
<script type="text/javascript" src="../js/d3gl.min.js"></script> -->

<script type="text/javascript">

function makePath(data) {
    var globe = d3.gl.globe()
        .width(500).height(500)
        .texture("../img/oldmap.png");
    
    var painter = globe.paint(function(gl, context, datum){
        context.beginPath();
        var latScale = d3.scale.linear()
            .domain([-90,90]).range([context.height,0]);
        var lonScale = d3.scale.linear()
            .domain([-180,180]).range([0,context.width]);
        
        data.forEach(function(concert){
            context.lineTo(lonScale(concert.lon), latScale(concert.lat));
        });

        context.lineWidth = 5;
        context.strokeStyle= "#f00";
        context.stroke();
    });
    
    d3.select("body").append("div")
        .attr("id", "globe")
        .datum(data).call(globe);
}

$(function(){
    $.get('../data/muse_tour_2012.json', function(data) {
        makePath(data);
    });
});
</script>
</body>
</html>
